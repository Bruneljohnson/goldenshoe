{"version":3,"file":"static/js/833.cc7a552f.chunk.js","mappings":"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","sources":["webpack://golden/./src/components/Profile/OrderItem.module.css?b084","components/Profile/OrderItem.js","components/Pages/OrderPage.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"orderItem\":\"OrderItem_orderItem__GyqiD\",\"status\":\"OrderItem_status__2eRUS\",\"info\":\"OrderItem_info__WT7Bh\",\"shipping\":\"OrderItem_shipping__cu-ZB\",\"shoeslist\":\"OrderItem_shoeslist__C+C8S\",\"shoeslist_deets\":\"OrderItem_shoeslist_deets__dMxlT\",\"shoeslist_price\":\"OrderItem_shoeslist_price__53+AA\",\"ticket\":\"OrderItem_ticket__fmwe2\"};","import React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport useHttp from \"../../Hooks/use-Http\";\nimport useInput from \"../../Hooks/use-input\";\nimport Alerts from \"../Ui/Alerts\";\nimport { BiArrowBack } from \"react-icons/bi\";\nimport { TiTickOutline } from \"react-icons/ti\";\n\nimport Input from \"../Ui/Input\";\nimport classes from \"./OrderItem.module.css\";\n\nconst OrderItem = () => {\n  const params = useParams();\n  const navigate = useNavigate();\n  const [showTicket, setShowTicket] = useState(false);\n  const [selected, setSelected] = useState(null);\n  const [hasError, setHasError] = useState(false);\n  const [ticketSent, setTicketSent] = useState(false);\n  const token = useSelector((state) => state.auth.token);\n  const id = useSelector((state) => state.auth.id);\n\n  const { error, sendRequest } = useHttp();\n\n  const user = useSelector((state) => state.auth.user);\n  const orders = user?.orders;\n  const detail = orders?.find((order) => order._id === params.id);\n  const amount = detail?.amount / 100;\n\n  const {\n    value: enteredTicket,\n    inputHandler: ticketInputHandler,\n    blurHandler: ticketBlurHandler,\n    clear: clearTicket,\n  } = useInput(\n    (value) => value.toLowerCase().trim() !== `` && value.trim().includes(` `)\n  );\n\n  const optionSelectHandler = (event) => {\n    event.preventDefault();\n\n    setSelected(event.target.value);\n  };\n\n  const showTicketHandler = () => {\n    setShowTicket((prev) => !prev);\n  };\n  const goBackHandler = () => {\n    navigate(`/user/${id}`, { replace: true });\n  };\n\n  // FETCH REQUEST\n  const sendTicketHandler = (event) => {\n    event.preventDefault();\n\n    const data = {\n      order: detail?._id,\n      type: selected,\n      description: enteredTicket,\n    };\n\n    console.log(data);\n    const requestConfig = {\n      url: \"https://goldenshoe-api.herokuapp.com/api/v1/tickets\",\n      method: \"POST\",\n      body: data,\n      headers: {\n        Authorization: `Bearer ${token}`,\n        \"content-Type\": \"application/json\",\n      },\n    };\n    const dataGrabber = () => {\n      setTicketSent(true);\n\n      setTimeout(() => {\n        setTicketSent(false);\n        navigate(`/user/${id}`, { replace: true });\n      }, 2000);\n    };\n\n    sendRequest(requestConfig, dataGrabber);\n    clearTicket();\n    setSelected(null);\n  };\n\n  /* ERROR HANDLING FOR FETCH REQUEST */\n  useEffect(() => {\n    let errorTimer;\n    if (error) {\n      setHasError(true);\n      errorTimer = setTimeout(() => {\n        setHasError(false);\n      }, 2000);\n    }\n\n    return () => {\n      clearTimeout(errorTimer);\n    };\n  }, [error]);\n\n  return (\n    <div className={classes.orderItem}>\n      {ticketSent && <Alerts type=\"success\" msg=\"Ticket Sent Successful!\" />}\n      {hasError && <Alerts type=\"error\" msg=\"Issue Sending Ticket\" />}\n\n      <h1>Order No. {detail?._id}</h1>\n      <div className={classes.status}>\n        <div className=\"flex-space-between\">\n          <strong>Status</strong>\n          <div className=\"flex-center\">\n            <span>{detail?.status}</span>\n            <TiTickOutline size={30} color=\"#dbca0f\" />\n          </div>\n        </div>\n        <div className=\"flex-space-between\">\n          <strong>Purchase Date</strong>\n\n          <span>\n            {new Intl.DateTimeFormat(\"en-UK\", {\n              month: \"short\",\n              day: \"2-digit\",\n              year: \"numeric\",\n            }).format(new Date(detail?.createdAt))}\n          </span>\n        </div>\n      </div>\n      <ul className={classes.info}>\n        <li className=\"flex-space-between\">\n          <strong>Amount</strong>\n\n          <span>£{amount}</span>\n        </li>\n        <li className={classes.shipping}>\n          <strong>Shipping Address</strong>\n          <div>\n            <ul>\n              <li>{detail?.shipping?.address?.line1}</li>\n              <li>{detail?.shipping?.address?.line2}</li>\n              <li>{detail?.shipping?.address?.city}</li>\n              <li>{detail?.shipping?.address?.postal_code}</li>\n              <li>{detail?.shipping?.address?.country}</li>\n            </ul>\n          </div>\n        </li>\n      </ul>\n      <ul>\n        {detail?.shoes.map((shoe) => (\n          <li className={classes.shoeslist} key={shoe._id}>\n            <figure>\n              <img src={shoe?.shoe?.image[0]} alt=\"Shoe\" />\n            </figure>\n            <div className={classes[\"shoeslist_deets\"]}>\n              <h2>{shoe?.shoe?.title.split(\"- \")[0]}</h2>\n\n              <span>Size: {shoe?.size}</span>\n            </div>\n            <div className={classes.shoeslist_price}>\n              <span>£{shoe?.shoe?.price}</span>\n\n              <span>x {shoe?.quantity}</span>\n            </div>\n          </li>\n        ))}\n      </ul>\n      {showTicket && (\n        <div className={classes.ticket}>\n          <h2 className=\" ma-bt-md\">Change Order</h2>\n          <form\n            onSubmit={sendTicketHandler}\n            className={`${classes.form} ${classes[\"form-user-data\"]}`}\n          >\n            <select onChange={optionSelectHandler}>\n              <option>Please Choose</option>\n              <option value=\"refund\">Refund</option>\n              <option value=\"exchange\">Exchange</option>\n            </select>\n\n            <Input\n              id=\"name\"\n              type=\"text\"\n              // user?.name?.toUpperCase()\n              placeholder={\"Please provide more information.\"}\n              value={enteredTicket}\n              onBlur={ticketBlurHandler}\n              onChange={ticketInputHandler}\n            />\n\n            <div className={`${classes[\"form__group\"]} right`}>\n              <button className=\"custom-button\" type=\"submit\">\n                Send\n              </button>\n            </div>\n          </form>\n        </div>\n      )}\n      <button type=\"button\" onClick={showTicketHandler}>\n        {showTicket ? \"Cancel\" : \"Would you like to change your order?\"}\n      </button>\n      <button type=\"button\" onClick={goBackHandler}>\n        <BiArrowBack className={classes[\"react-icon\"]} size={30} />\n      </button>\n    </div>\n  );\n};\n\nexport default OrderItem;\n","import React from \"react\";\nimport OrderItem from \"../Profile/OrderItem\";\n\nconst OrderPage = () => {\n  return <OrderItem />;\n};\n\nexport default OrderPage;\n"],"names":["params","useParams","navigate","useNavigate","useState","showTicket","setShowTicket","selected","setSelected","hasError","setHasError","ticketSent","setTicketSent","token","useSelector","state","auth","id","useHttp","error","sendRequest","user","orders","detail","find","order","_id","amount","useInput","value","toLowerCase","trim","includes","enteredTicket","ticketInputHandler","inputHandler","ticketBlurHandler","blurHandler","clearTicket","clear","useEffect","errorTimer","setTimeout","clearTimeout","className","classes","Alerts","type","msg","status","size","color","Intl","DateTimeFormat","month","day","year","format","Date","createdAt","shipping","address","line1","line2","city","postal_code","country","shoes","map","shoe","src","image","alt","title","split","price","quantity","onSubmit","event","preventDefault","data","description","console","log","requestConfig","url","method","body","headers","Authorization","replace","onChange","target","Input","placeholder","onBlur","onClick","prev"],"sourceRoot":""}