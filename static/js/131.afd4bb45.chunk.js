"use strict";(self.webpackChunkgolden=self.webpackChunkgolden||[]).push([[131],{3131:function(e,r,n){n.r(r),n.d(r,{default:function(){return y}});var t=n(2791),a=n(8152),s=n(6048),i=n.n(s),l=n(9434),o=n(8820),c=n(8245),d=n(6871),u=n(6502),m=n(5471),f=n(3686),h=n(6246),_={account:"EditProfile_account__TdygD","user-view__content":"EditProfile_user-view__content__SljdB",form__input:"EditProfile_form__input__DVb8y",form__group:"EditProfile_form__group__jII+N",form__label:"EditProfile_form__label__OetF0"},p=n(184),v=function(){var e=(0,d.s0)(),r=(0,t.useState)(!1),n=(0,a.Z)(r,2),s=n[0],i=n[1],o=(0,t.useState)(!1),c=(0,a.Z)(o,2),v=c[0],x=c[1],j=(0,t.useState)(!1),g=(0,a.Z)(j,2),P=g[0],b=g[1],N=(0,l.v9)((function(e){return e.auth.token})),C=(0,u.Z)(),w=C.error,Z=C.sendRequest,y=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,S=(0,m.Z)((function(e){return""!==e.toLowerCase().trim()&&e.trim().includes(" ")})),E=S.value,A=S.isValid,D=S.inputHandler,H=S.blurHandler,T=S.clear,k=(0,m.Z)((function(e){return e.toLowerCase().match(y)!==[]})),B=k.value,L=k.isValid,O=k.inputHandler,z=k.blurHandler,F=k.clear;(0,t.useEffect)((function(){(L||A)&&i(!0)}),[L,A]),(0,t.useEffect)((function(){var e;return w&&(x(!0),e=setTimeout((function(){x(!1)}),2e3)),function(){clearTimeout(e)}}),[w]);return(0,p.jsxs)(t.Fragment,{children:[P&&(0,p.jsx)(f.Z,{type:"success",msg:"Your Account Has Been Updated!"}),v&&(0,p.jsx)(f.Z,{type:"error",msg:"Account update failed"}),(0,p.jsxs)("div",{className:_.account,children:[(0,p.jsx)("h2",{className:" ma-bt-md",children:"Your account settings"}),(0,p.jsxs)("form",{onSubmit:function(r){if(r.preventDefault(),s){var n={url:"https://goldenshoe-api.herokuapp.com/api/v1/users/updateMe",method:"PATCH",body:{email:B,name:E},headers:{Authorization:"Bearer ".concat(N),"content-Type":"application/json"}};Z(n,(function(r){r&&(b(!0),setTimeout((function(){b(!1),e("/",{replace:!0})}),2e3))})),F(),T()}},className:"".concat(_.form," ").concat(_["form-user-data"]),children:[(0,p.jsx)(h.Z,{label:"Name",id:"name",type:"text",placeholder:"Brunel Johnson",value:E,onBlur:H,onChange:D}),(0,p.jsx)(h.Z,{label:"Email Address",id:"email",className:"ma-bt-md",type:"email",placeholder:"brunel@mailsac.com",value:B,onBlur:z,onChange:O}),(0,p.jsx)("div",{className:"".concat(_.form__group," right"),children:(0,p.jsx)("button",{className:"custom-button",type:"submit",children:"Save Settings"})})]})]})]})},x=function(){var e=(0,d.s0)(),r=(0,t.useState)(!1),n=(0,a.Z)(r,2),s=n[0],i=n[1],o=(0,t.useState)(!1),c=(0,a.Z)(o,2),v=c[0],x=c[1],j=(0,t.useState)(!1),g=(0,a.Z)(j,2),P=g[0],b=g[1],N=(0,l.v9)((function(e){return e.auth.token})),C=(0,u.Z)(),w=C.error,Z=C.sendRequest,y=(0,m.Z)((function(e){return""!==e.trim()&&e.trim().length>=8})),S=y.value,E=y.isValid,A=y.inputHandler,D=y.blurHandler,H=y.clear,T=(0,m.Z)((function(e){return""!==e.trim()&&e.trim().length>=8})),k=T.value,B=T.isValid,L=T.inputHandler,O=T.blurHandler,z=T.clear,F=(0,m.Z)((function(e){return e===k})),V=F.value,Y=F.isValid,M=F.inputHandler,I=F.blurHandler,R=F.clear;(0,t.useEffect)((function(){E&&B&&Y&&i(!0)}),[E,B,Y]);return(0,t.useEffect)((function(){var e;return w&&(x(!0),e=setTimeout((function(){x(!1)}),2e3)),function(){clearTimeout(e)}}),[w]),(0,p.jsxs)(t.Fragment,{children:[P&&(0,p.jsx)(f.Z,{type:"success",msg:"Your Password Has Been Updated!"}),v&&(0,p.jsx)(f.Z,{type:"error",msg:"Account update failed"}),(0,p.jsxs)("div",{className:_.account,children:[(0,p.jsx)("h2",{className:"ma-bt-md",children:"Change Your Password"}),(0,p.jsxs)("form",{onSubmit:function(r){if(r.preventDefault(),s){var n={url:"https://goldenshoe-api.herokuapp.com/api/v1/users/updatePassword",method:"PATCH",body:{currentPassword:S,password:k,confirmPassword:V},headers:{Authorization:"Bearer ".concat(N),"content-Type":"application/json"}};Z(n,(function(r){r&&(b(!0),setTimeout((function(){b(!1),e("/",{replace:!0})}),2e3))})),H(),z(),R()}},className:"".concat(_.form," ").concat(_["form-user-settings"]),children:[(0,p.jsx)(h.Z,{label:"Current Password",id:"password-current",type:"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",value:S,onBlur:D,onChange:A}),(0,p.jsx)(h.Z,{label:"New Password",id:"password-new",type:"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",value:k,onBlur:O,onChange:L}),(0,p.jsx)(h.Z,{label:"Confirm Password",id:"password-confirm",type:"password",className:"ma-bt-lg",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",value:V,onBlur:I,onChange:M}),!Y&&(0,p.jsx)("div",{className:_.invalid,children:"Passwords Don't Match"}),(0,p.jsx)("div",{className:"".concat(_.form__group," right"),children:(0,p.jsx)("button",{className:"custom-button",type:"submit",disabled:!s,children:"Save Password"})})]})]})]})},j="OrderList_orderlist__DKbt6",g="OrderList_orderlist_deets__tYtRU",P="OrderList_orderlist_price__aG+eL",b="OrderList_smallScreen__YODei",N="OrderList_bigScreen__A9gDf",C=function(e){var r,n=(0,d.s0)();return(0,p.jsxs)("li",{className:j,children:[(0,p.jsx)("figure",{children:(0,p.jsx)("img",{src:c.W.blackCon,alt:"Black Converse"})}),(0,p.jsxs)("div",{className:g,children:[(0,p.jsx)("h2",{className:N,children:e.title}),(0,p.jsx)("h2",{className:b,children:(null===(r=e.title)||void 0===r?void 0:r.length)>11?"".concat(e.title.slice(0,11),"..."):e.title}),(0,p.jsxs)("span",{children:["ORDERED: ",e.createdAt]})]}),(0,p.jsxs)("div",{className:P,children:[(0,p.jsxs)("span",{children:["\xa3",e.amount]}),(0,p.jsx)("button",{type:"button",onClick:function(){n("/order/".concat(e.id),{replace:!0})},children:"Details"})]})]})},w={profile:"Profile_profile__VHbzQ",userProfile:"Profile_userProfile__eQS2K",userProfile_deets:"Profile_userProfile_deets__P0Nxj",orders:"Profile_orders__Tdgrz",editProfile:"Profile_editProfile__MYjUr",paginationContainer:"Profile_paginationContainer__LGCJZ",activePage:"Profile_activePage__GZcEt",nextPage:"Profile_nextPage__eC9M0",prevPage:"Profile_prevPage__vZMvv","react-icon":"Profile_react-icon__q3qsc"},Z=function(e){var r,n=(0,t.useState)(!1),s=(0,a.Z)(n,2),d=s[0],u=s[1],m=(0,t.useState)(0),f=(0,a.Z)(m,2),h=f[0],_=f[1],j=(0,l.v9)((function(e){return e.auth.user})),g=j.orders,P=4*h,b=Math.ceil((null===g||void 0===g?void 0:g.length)/4),N=null!==(r=null===g||void 0===g?void 0:g.slice(P,P+4).map((function(e){var r=null===e||void 0===e?void 0:e.createdAt,n=new Intl.DateTimeFormat(navigator.language,{month:"short",day:"2-digit",year:"numeric"}).format(new Date(r)),t=e.amount/100;return(0,p.jsx)(C,{id:e._id,title:e._id,amount:t,createdAt:n},e._id)})))&&void 0!==r?r:"",Z=new Date(null===j||void 0===j?void 0:j.createdAt),y=new Intl.DateTimeFormat(navigator.language,{month:"short",day:"2-digit",year:"numeric"}).format(Z);return(0,p.jsxs)("div",{className:w.profile,children:[!d&&(0,p.jsx)(t.Fragment,{children:(0,p.jsxs)("div",{className:w.orders,children:[(0,p.jsx)("h1",{children:"Orders"}),(0,p.jsx)("ul",{children:N}),(null===g||void 0===g?void 0:g.length)>0&&(0,p.jsx)(i(),{previousLabel:(0,p.jsx)(o.CF5,{fontSize:25,className:w["react-icon"]}),nextLabel:(0,p.jsx)(o.Td4,{fontSize:25,className:w["react-icon"]}),pageCount:b,onPageChange:function(e){var r=e.selected;_(r)},containerClassName:w.paginationContainer,previousLinkClassName:w.prevPage,nextLinkClassName:w.nextPage,activeClassName:w.activePage})]})}),d&&(0,p.jsx)(t.Fragment,{children:(0,p.jsxs)("div",{className:w.editProfile,children:[(0,p.jsx)("h1",{children:"Edit Profile"}),(0,p.jsx)(v,{}),(0,p.jsx)("div",{className:"line",children:" \xa0 "}),(0,p.jsx)(x,{})]})}),(0,p.jsxs)("div",{className:w.userProfile,children:[(0,p.jsx)("figure",{children:(0,p.jsx)("img",{src:c.W.defaultImage,alt:"default"})}),(0,p.jsx)("h2",{children:null===j||void 0===j?void 0:j.name}),(0,p.jsxs)("ul",{className:w.userProfile_deets,children:[(0,p.jsxs)("li",{children:[(0,p.jsx)("strong",{children:"Email:"}),(0,p.jsx)("span",{children:null===j||void 0===j?void 0:j.email})]}),(0,p.jsxs)("li",{children:[(0,p.jsx)("strong",{children:"Verified:"}),(0,p.jsx)("span",{children:"Yes"})]}),(0,p.jsxs)("li",{children:[(0,p.jsx)("strong",{children:"Customer Since:"}),(0,p.jsx)("span",{children:y})]})]}),(0,p.jsx)("button",{type:"button",className:w.editBtn,onClick:function(){u((function(e){return!e}))},children:d?"Orders":"Edit Profile"})]})]})},y=function(){return(0,p.jsx)(Z,{})}}}]);
//# sourceMappingURL=131.afd4bb45.chunk.js.map